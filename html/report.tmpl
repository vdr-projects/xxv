<h1><?% gettext("Protocol of the activities") %?></h1>

<?% FOREACH name = data.keys.sort %?>
    <h2><?% gettext("Report for module") %?>&nbsp;
        <?% name %?>:</h2>
    <?% IF name == 'RECORDS';
            link = '?cmd=rdisplay&data=';
        ELSIF name == 'AUTOTIMER';
            link = '?cmd=tedit&data=';
        END;
     %?>

    <?% FOREACH typ = data.$name.keys.sort %?>
        <?% IF typ == 'message' %?>
            <?% data.$name.$typ %?><p>

        <?% ELSIF typ == 'table' and data.$name.$typ.size > 1 %?>
           <?% fields = data.$name.$typ.shift %?>
                <table>
                    <tr>
                    <?% FOREACH field = fields %?>
                        <?% NEXT IF field.match('^__') %?>
                        <th>
                            <nobr><?% field %?>
                            </nobr>
                        </th>
                    <?% END %?>
                    </tr>
                    <?% FOREACH zeile = data.$name.$typ %?>
                    <tr>
                        <?% c = -1 %?>
                        <?% FOREACH field = zeile %?>
                            <?% c = c + 1 %?>
                            <?% NEXT IF fields.$c.match('^__') %?>
                            <td><a href='<?% link %?><?% zeile.first %?>'><?% field %?></a></td>
                        <?% END %?>
                    </tr>
                    <?% END %?>
            </table>
        <?% END %?>
    <?% END %?>
    <p>
<?% END %?>
